{"version":3,"sources":["dist/hyperapp-context.js"],"names":["global","factory","exports","module","define","amd","context","this","withContext","app","initialState","actionDefinitions","originalView","container","state","actions","rootNode","processVTree","node","props","Object","assign","Array","isArray","map","n","prototype","concat","apply","filter","attributes","children","length","Context","setContext","defineProperty","value"],"mappings":"CAAC,SAAUA,EAAQC,GACC,iBAAZC,SAA0C,oBAAXC,OAAyBF,EAAQC,SACrD,mBAAXE,QAAyBA,OAAOC,IAAMD,QAAQ,WAAYH,GAChEA,EAASD,EAAOM,YAHlB,CAIEC,KAAM,SAAWL,GAAW,aAuC9BA,EAAQM,YAVR,SAAsBC,GAClB,OAAO,SAAUC,EAAcC,EAAmBC,EAAcC,GAK5D,OAAOJ,EAAIC,EAAcC,EAJd,SAAUG,EAAOC,GACxB,IAAIC,EAvBhB,SAASC,EAAcC,EAAMZ,GAEzB,OADAA,EAAUA,MACE,MAARY,EAAqBA,EACL,mBAATA,EACAD,EACHC,EAAKZ,EAAS,SAAUa,GAASb,EAAUc,OAAOC,UAAWf,EAASa,KACtEb,GAGJgB,MAAMC,QAAQL,IACdA,EAAOA,EAAKM,IAAI,SAAUC,GAAK,OAAOR,EAAaQ,EAAGnB,KAEtDY,GADAA,EAAOI,MAAMI,UAAUC,OAAOC,SAAUV,IAC5BW,OAAO,SAAUJ,GAAK,OAAY,MAALA,KAGxCP,EAAKY,YACVZ,EAAKa,SAAWd,EAAaC,EAAKa,SAAUzB,GACrCY,GAFsBA,EAQND,CAAaL,EAAaE,EAAOC,IAChD,OAAOC,EAASgB,OAAShB,EAAS,GAAKA,GAEOH,KAK1DX,EAAQ+B,QAtCR,SAAkBd,EAAOY,GACrB,OAAO,SAAUzB,EAAS4B,GAEtB,OADAA,EAAWf,GACJY,IAqCfX,OAAOe,eAAejC,EAAS,cAAgBkC,OAAO","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.context = {})));\n}(this, (function (exports) { 'use strict';\n\nfunction Context (props, children) {\n    return function (context, setContext) {\n        setContext(props);\n        return children\n    }\n}\n\nfunction processVTree (node, context) {\n    context = context ||Â {};\n    if (node == null) return node\n    if (typeof node === 'function') {\n        return processVTree(\n            node(context, function (props) { context = Object.assign({}, context, props);}),\n            context\n        )\n    }\n    if (Array.isArray(node)) {\n        node = node.map(function (n) { return processVTree(n, context)});\n        node = Array.prototype.concat.apply([], node);\n        node = node.filter(function (n) { return n != null });\n        return node\n    }\n    if (!node.attributes) return node\n    node.children = processVTree(node.children, context);\n    return node\n}\n\nfunction withContext (app) {\n    return function (initialState, actionDefinitions, originalView, container) {\n        var view = function (state, actions) {\n            var rootNode = processVTree(originalView(state, actions));\n            return rootNode.length ? rootNode[0] : rootNode\n        };\n        return app(initialState, actionDefinitions, view, container)\n    }\n}\n\nexports.withContext = withContext;\nexports.Context = Context;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=hyperapp-context.js.map\n"]}